{% extends 'common.html' %}
{% load crispy_forms_tags %}
{% block title %}Posts {% endblock title %}
{% block content %}
  <h4> Welcome {{user}}</h4>
    <div class="row justify-content-md-center post">
    <div class="col-8">
      {% if posts %}
      <div class="row justify-content-md-center posts" >
        {% for post in posts %}
        <div class="col-4 content">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h5 >{{ post.title }}</h5>
            </div>
            <div class="panel-body">
              {{ post.content|linebreaks|truncatechars:70 }}
                <p>
                  <a class='editPost' href='/posts/{{post.pk}}/detail'>Read More ...</a>
                </p>
            </div>
            <div class="panel-footer">
              Author: <em>{{ post.author }}</em><br/>
              Date: <em>{{ post.date_created }}</em><br />
              {% if post.user_id.pk == request.user.pk %}
              <a class='editPost' href='/posts/{{post.pk}}/edit'>edit</a>
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %}
        {% else %}
        <h4> No Posts available yet</h4>
        {% endif %}
      </div>
<hr />

    </div>
    <div class="col-4">
      <h5 id="post_action">{{title}}</h5>
      <form id=post_form>{% csrf_token  %}
      {{ form|crispy }}
      <input class="button button-default" id="update_post" value="Post" type="submit" />
    </form>
    </div>
  </div>
{% endblock content %}
